# 本地API配置说明

## 当前配置

扩展已经配置为使用您的本地API服务:

- **API地址**: `http://127.0.0.1:8045/v1/chat/completions`
- **API密钥**: `sk-c2bf4ae57ed945469c1d57088d32b864`
- **默认模型**: `claude-sonnet-4-5`

## 快速开始

### 1. 确保本地API服务运行

确保您的本地API代理服务正在运行在 `http://127.0.0.1:8045`

### 2. 加载扩展

1. 打开Chrome浏览器,访问 `chrome://extensions/`
2. 开启"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择 `chrome-translator` 文件夹
5. 扩展安装完成!

### 3. 配置翻译引擎

1. 右键点击扩展图标,选择"选项"
2. 选择"GPT 翻译"
3. 确认配置:
   - API密钥: `sk-c2bf4ae57ed945469c1d57088d32b864`
   - AI模型: `claude-sonnet-4-5`
   - API地址: `http://127.0.0.1:8045/v1/chat/completions`
4. 点击"保存设置"

### 4. 开始使用

在任何网页上选择英文文本,即可自动使用Claude进行翻译!

## 支持的模型

设置页面现在支持以下模型:

### OpenAI 模型
- `gpt-3.5-turbo`
- `gpt-4`
- `gpt-4-turbo`

### Claude 模型
- `claude-sonnet-4-5` (默认)
- `claude-3-5-sonnet-20241022`
- `claude-3-opus-20240229`

### 其他模型
- `deepseek-chat`

您可以在设置页面的下拉菜单中选择任何模型。

## API请求格式

扩展会发送以下格式的请求到您的本地API:

```javascript
{
  "model": "claude-sonnet-4-5",
  "messages": [
    {
      "role": "system",
      "content": "你是一个专业的英译中翻译助手。请将用户提供的英文文本翻译成简体中文。只返回翻译结果,不要添加任何解释或额外内容。"
    },
    {
      "role": "user",
      "content": "要翻译的英文文本"
    }
  ],
  "temperature": 0.3,
  "max_tokens": 2000
}
```

## 切换翻译引擎

您可以随时在设置页面切换翻译引擎:

- **Google 翻译**: 免费,无需配置
- **AI 翻译**: 使用您的本地API服务

## 故障排除

### 翻译失败

如果翻译失败,请检查:

1. **本地API服务是否运行**: 访问 `http://127.0.0.1:8045` 确认服务可用
2. **API密钥是否正确**: 在设置页面确认密钥
3. **模型名称是否正确**: 确保您的API服务支持所选模型
4. **浏览器控制台**: 按F12打开开发者工具,查看Console中的错误信息

### 查看请求详情

1. 按F12打开Chrome开发者工具
2. 切换到"Network"标签
3. 选择文本触发翻译
4. 查看发送到 `127.0.0.1:8045` 的请求和响应

## 自定义配置

如果您需要修改默认配置:

1. **修改API地址**: 编辑 `translator.js` 第7行
2. **修改API密钥**: 编辑 `translator.js` 第6行
3. **修改默认模型**: 编辑 `translator.js` 第8行

或者直接在设置页面修改,无需编辑代码。

---

**享受AI翻译的便捷!** 🎉
